@page "/"

<h1>

    @monthName @year @tempint

</h1>
@if (monthsAway > 0)
{
<button type="button" class="btn btn-default btn-lg" @onclick="() => { monthsAway--; CreateMonth(); }">
    <i class="bi bi-arrow-thick-left"></i>
    <span class="oi oi-arrow-thick-left"></span>
</button>
}
else
{
<button id="BtnDisable" type="button" class="btn btn-default btn-lg" disabled>
    <i class="bi bi-arrow-thick-left"></i>
    <span class="oi oi-arrow-thick-left"></span>
</button>
}
@if (monthsAway < 100)
{
<button type="button" class="btn btn-default btn-lg" @onclick="() => { monthsAway++; CreateMonth(); }">
    <i class="bi bi-arrow-thick-right"></i>
    <span class="oi oi-arrow-thick-right"></span>
</button>
}
else
{
<button id="BtnDisable" type="button" class="btn btn-default btn-lg" disabled>
    <i class="bi bi-arrow-thick-right"></i>
    <span class="oi oi-arrow-thick-right"></span>
</button>
}
<div class="row">
    <div class="col-md-7">
        <table class="table table-bordered col">
            <thead>
                <tr>
                    <th> Mandag </th>
                    <th> Tirsdag </th>
                    <th> Onsdag </th>
                    <th> Torsdag </th>
                    <th> Fredag </th>
                    <th> Lørdag </th>
                    <th> Søndag </th>

                </tr>
            </thead>
            <tbody>
                <tr>
                    @for (int i = 0; i < numDummyColumn - 1; i++)
                    {
                        <td></td>
                    }

                    @for (int i = 1; i + numDummyColumn - 1 <= 7; i++)
                    {
                            int k = i;
                        <td @onclick = "(()=>ShowMoreInfo(k))">@i</td>
                    }
                </tr>
                @for (int i = 8 - numDummyColumn + 1; i <= monthEnd.Day; i += 7)
                {
                    <tr class="clik">
                        @for (int j = 0; j < 7; j++)
                        {
                            @if (i + j <= monthEnd.Day)
                            {
                                int k = i + j;
                                <td @onclick = "(()=>ShowMoreInfo(k))">@(i + j)</td>
                            }
                            else
                            {
                                <td></td>
                            }
                        }
                    </tr>
                }


            </tbody>
        </table>
    </div>

    <div class="col-md-5 border">
        <div>Hej</div>
        <div>asdasd</div>
        <div>asdjkfghbsadf</div>
        <div>asdfsavd</div>
        <div>quby</div>
        <div>iuasdbj</div>
        <div>mosjndf</div>
        <div>uysvdjh</div>
    </div>
</div>


@code {
    string monthName = "";
    DateTime monthEnd;
    int monthsAway = 0;
    int numDummyColumn = 0;
    int year = 0;
    int month = 0;
    int tempint = 0;

    protected override void OnInitialized()
    {
        CreateMonth();
    }

    void CreateMonth()
    {
        var tempDate = DateTime.Now.AddMonths(monthsAway);
        month = tempDate.Month;
        year = tempDate.Year;

        DateTime monthStart = new DateTime(year, month, 1);
        monthEnd = monthStart.AddMonths(1).AddDays(-1);
        monthName = monthStart.Month switch
        {
            1 => "Januar",
            2 => "Februar",
            3 => "Marts",
            4 => "April",
            5 => "Maj",
            6 => "Juni",
            7 => "Juli",
            8 => "August",
            9 => "September",
            10 => "Oktober",
            11 => "November",
            12 => "December",
            _ => ""
        };

        numDummyColumn = (int)monthStart.DayOfWeek;
        @if (numDummyColumn == 0)
        {
            numDummyColumn = 7;
        }
    }

    void ShowMoreInfo(int DayClicked)
    {
        tempint = DayClicked;
    }
}